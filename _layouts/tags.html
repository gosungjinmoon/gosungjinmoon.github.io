---
layout: default
---

{%- comment -%}
  Custom tags layout with language filtering
  Based on Chirpy theme v6.6.0
{%- endcomment -%}

{%- assign current_lang = page.lang | default: site.lang | default: 'en' -%}
{%- assign filtered_tags = "" | split: "" -%}

{%- for tag in site.tags -%}
  {%- assign posts = tag[1] | where: "lang", current_lang -%}
  {%- if posts.size > 0 -%}
    {%- assign filtered_tags = filtered_tags | push: tag -%}
  {%- endif -%}
{%- endfor -%}

<main class="container">
  <article class="post">
    <header>
      <h1 class="post-title">
        {{ site.data.locales[current_lang].sidebar.tags | default: "Tags" }}
      </h1>
      <p class="post-description">
        {{ site.data.locales[current_lang].tags.description | default: "Browse posts by tags." }}
      </p>
    </header>

    <div class="post-content">
      {%- if filtered_tags.size > 0 -%}
        <ul class="tag-cloud">
          {%- for tag in filtered_tags -%}
            {%- assign tag_name = tag[0] -%}
            {%- assign count = tag[1] | where: "lang", current_lang | size -%}
            <li>
              <a href="{{ '/' | append: current_lang | append: '/tags/' | append: tag_name | slugify | append: '/' | relative_url }}"
                 style="font-size: {{ count | times: 2 | plus: 10 }}px;">
                {{ tag_name }} ({{ count }})
              </a>
            </li>
          {%- endfor -%}
        </ul>
      {%- else -%}
        <p>{{ site.data.locales[current_lang].tags.empty | default: "No tags available." }}</p>
      {%- endif -%}
    </div>
  </article>
</main>
