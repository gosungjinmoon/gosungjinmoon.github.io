<header class="site-header">
  <div class="container header-inner">
    <a class="brand" href="/"><img id="brand-logo" alt="GOFUNWITH logo" width="220" height="64"/></a>

    {% assign lang_prefix = "" %}
    {% if page.lang == "en" %}{% assign lang_prefix = "/en" %}{% endif %}

    <nav class="nav">
      <a href="{{ lang_prefix }}/search/">Search</a>
      <a href="{{ lang_prefix }}/tags/">Tags</a>
      {% include lang-switch.html %}
      <button id="themeToggle" class="chip" aria-label="Toggle theme">Light/Dark</button>
    </nav>
  </div>
</header>
<script>
(function(){
  const key="gfw-theme";
  function applyTheme(t){
    document.documentElement.dataset.theme=t;
    const logo=document.getElementById("brand-logo");
    logo.src = (t==="dark") ? "/assets/logo/logo-dark.svg" : "/assets/logo/logo-light.svg";
  }
  const saved=localStorage.getItem(key)||(matchMedia('(prefers-color-scheme: dark)').matches?'dark':'light');
  applyTheme(saved);
  document.getElementById('themeToggle').onclick=function(){
    const next=(document.documentElement.dataset.theme==='dark')?'light':'dark';
    localStorage.setItem(key,next); applyTheme(next);
  };
})();
</script>
