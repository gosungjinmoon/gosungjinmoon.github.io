{%- assign current = page.lang | default: 'ko' -%}
{%- assign path = page.url -%}

{%- if current == 'en' -%}
  {%- assign other = 'ko' -%}
{%- else -%}
  {%- assign other = 'en' -%}
{%- endif -%}

{%- comment -%}
우선순위:
1) .ko. / .en. 확장 교체 (포스트 상세)
2) /ko/ ↔ /en/ 경로 스왑 (섹션/리스트/페이지)
3) 그 외: 상대 언어 홈으로
{%- endcomment -%}

{%- if path contains '.ko.' -%}
  {%- assign other_url = path | replace: '.ko.', '.en.' -%}
{%- elsif path contains '.en.' -%}
  {%- assign other_url = path | replace: '.en.', '.ko.' -%}
{%- elsif path | slice: 0, 4 == '/ko/' -%}
  {%- assign other_url = path | replace_first: '/ko/', '/en/' -%}
{%- elsif path | slice: 0, 4 == '/en/' -%}
  {%- assign other_url = path | replace_first: '/en/', '/ko/' -%}
{%- else -%}
  {%- if other == 'en' -%}
    {%- assign other_url = '/en/' -%}
  {%- else -%}
    {%- assign other_url = '/' -%}
  {%- endif -%}
{%- endif -%}

<a class="lang-pill" href="{{ other_url | relative_url }}">{{ other | upcase }}</a>
