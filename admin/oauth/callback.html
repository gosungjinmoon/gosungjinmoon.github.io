<!DOCTYPE html>
<html lang="ko">
<head><meta charset="UTF-8"><title>OAuth Callback</title></head>
<body>
  <p>GitHub OAuth 처리 중입니다...</p>
  <script>
    (async () => {
      const code = new URL(location.href).searchParams.get('code');
      if(!code){ location.replace('/admin/'); return; }
      try{
        const url = '{{ site.data.theme.cloudflare_worker_endpoint }}?code=' + encodeURIComponent(code);
        const r = await fetch(url); const data = await r.json();
        if (data.access_token){ sessionStorage.setItem('github_token', data.access_token); }
      }catch(e){}
      location.replace('/admin/');
    })();
  </script>
</body>
</html>
